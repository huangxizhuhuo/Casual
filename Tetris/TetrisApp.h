#pragma once

#include "../Core/Export.h"

class CTetrisApp:public  CApplication
{
public:
	CTetrisApp();
	~CTetrisApp();
	BOOL Init();  
    BOOL Shutdown(); 
    BOOL Frame();
	bool PlaySound(long Num);

protected:
	CGraphics m_Graphics;	
	CGameFont m_Font;
	CInput m_Input;
	CInputDevice m_Keyboard;
	CSound m_Sound;
	CSoundChannel m_SoundChannel;
	CSoundData    m_SoundData;
	int m_nFPS;
	bool m_bGameOver;

	CTexture m_texRect;
	void DrawContainer(int x1=250,int x2=550, int y1=0,int y2=600);
	void DrawBlock(int x,int y,int type,int direction,int color=0);
	void GenerateBlock();
	int m_nType,m_nNextType;
	int m_nStartX;
	int m_nStartY;
	int m_nDirection;
	int m_nColor,m_nLastColor;
	int a[10][24];
	bool m_bTouch;
};

int r[7][4][4][4]=
{
	{//图形0
		{
			{0,0,0,0},
			{0,1,0,0},
			{1,1,1,0},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,1,0,0},
			{0,1,1,0},
			{0,1,0,0},
		},
		{
			{0,0,0,0},
			{0,0,0,0},
			{1,1,1,0},
			{0,1,0,0},
		},
		{
			{0,0,0,0},
			{0,1,0,0},
			{1,1,0,0},
			{0,1,0,0},
		}
	},
	{//图形1
		{
			{1,1,1,1},
			{0,0,0,0},
			{0,0,0,0},
			{0,0,0,0},
		},
		{
			{0,0,0,1},
			{0,0,0,1},
			{0,0,0,1},
			{0,0,0,1},
		},
		{
			{1,1,1,1},
			{0,0,0,0},
			{0,0,0,0},
			{0,0,0,0},
		},
		{
			{0,0,0,1},
			{0,0,0,1},
			{0,0,0,1},
			{0,0,0,1},
		}
	},
	{//图形2
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,1,1,0},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,1,1,0},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,1,1,0},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,1,1,0},
			{0,0,0,0},
		}
	},
	{//图形3
		{
			{0,0,0,0},
			{0,1,0,0},
			{0,1,1,0},
			{0,0,1,0},
		},
		{
			{0,0,0,0},
			{0,0,1,1},
			{0,1,1,0},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,0,1,0},
			{0,0,1,1},
			{0,0,0,1},
		},
		{
			{0,0,0,0},
			{0,0,0,0},
			{0,0,1,1},
			{0,1,1,0},
		}
	},
	{////图形4
		{
			{0,0,0,0},
			{0,0,1,0},
			{0,1,1,0},
			{0,1,0,0},
		},
		{
			{0,0,0,0},
			{0,0,0,0},
			{1,1,0,0},
			{0,1,1,0},
		},
		{
			{0,0,0,0},
			{0,1,0,0},
			{1,1,0,0},
			{1,0,0,0},
		},
		{
			{0,0,0,0},
			{1,1,0,0},
			{0,1,1,0},
			{0,0,0,0},
		}
	},
	{//图形5
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,0,1,0},
			{0,0,1,0},
		},
		{
			{0,0,0,0},
			{0,0,0,1},
			{0,1,1,1},
			{0,0,0,0},
		},
		{
			{0,0,0,0},
			{0,0,1,0},
			{0,0,1,0},
			{0,0,1,1},
		},
		{
			{0,0,0,0},
			{0,0,0,0},
			{0,1,1,1},
			{0,1,0,0},
		}
	},
	{//图形6
		{
			{0,0,0,0},
			{0,1,1,0},
			{0,1,0,0},
			{0,1,0,0},
		},
		{
			{0,0,0,0},
			{0,0,0,0},
			{1,1,1,0},
			{0,0,1,0},
		},
		{
			{0,0,0,0},
			{0,1,0,0},
			{0,1,0,0},
			{1,1,0,0},
		},
		{
			{0,0,0,0},
			{1,0,0,0},
			{1,1,1,0},
			{0,0,0,0},
		}
	}
};

